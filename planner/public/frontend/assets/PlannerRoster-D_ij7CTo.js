var _=(g,x,r)=>new Promise((C,n)=>{var h=d=>{try{k(r.next(d))}catch(b){n(b)}},u=d=>{try{k(r.throw(d))}catch(b){n(b)}},k=d=>d.done?C(d.value):Promise.resolve(d.value).then(h,u);k((r=r.apply(g,x)).next())});import{_ as G,h as H,r as v,v as U,i as J,j as K,a as Q,w as T,o as f,d as e,e as l,u as s,x as m,t as i,y as X,z as Y,f as D,g as Z,F as ee,k as $,l as z,m as te,A as ae,p as j,q as se,s as re}from"./index-n7IU6Utn.js";import{_ as oe}from"./Layout-ED0c6vtM.js";import{u as le,T as de,_ as ne}from"./useWorkloadManager-Cy9eaXE8.js";const c=g=>(se("data-v-08db7ed3"),g=g(),re(),g),ie={class:"mx-auto px-4 lg:px-8 max-w-[2000px]"},ce={class:"planner-header mb-6 sticky top-0 z-50 bg-white dark:bg-gray-900 pb-4"},ue={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6"},me={class:"flex items-center gap-4"},ge={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg"},he=c(()=>e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Team Planner",-1)),be={class:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400 mt-1"},xe={class:"flex items-center gap-1"},ke=c(()=>e("span",{class:"w-1 h-1 bg-gray-400 rounded-full"},null,-1)),pe={class:"flex items-center gap-1"},_e={class:"grid grid-cols-2 lg:grid-cols-4 gap-4"},ve={class:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-xl p-4 border border-blue-200 dark:border-blue-700"},fe={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},ye=c(()=>e("div",{class:"text-xs text-blue-600/70 dark:text-blue-400/70 font-medium"},"Team Members",-1)),we={class:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-xl p-4 border border-green-200 dark:border-green-700"},Te={class:"text-2xl font-bold text-green-600 dark:text-green-400"},De=c(()=>e("div",{class:"text-xs text-green-600/70 dark:text-green-400/70 font-medium"},"Scheduled",-1)),Ce={class:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 rounded-xl p-4 border border-yellow-200 dark:border-yellow-700"},Se={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},ze=c(()=>e("div",{class:"text-xs text-yellow-600/70 dark:text-yellow-400/70 font-medium"},"Backlog",-1)),Ae={class:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-xl p-4 border border-purple-200 dark:border-purple-700"},Me={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},Ue=c(()=>e("div",{class:"text-xs text-purple-600/70 dark:text-purple-400/70 font-medium"},"Utilization",-1)),$e={class:"flex items-center justify-between mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"},je={class:"flex items-center gap-4"},Ie={class:"flex items-center gap-2"},Ee=c(()=>e("option",{value:""},"All Departments",-1)),Ne=["value"],Pe={class:"flex bg-white dark:bg-gray-700 rounded-lg p-1 border border-gray-200 dark:border-gray-600"},Ve={class:"flex items-center gap-3"},Be={class:"timeline-container"},Le={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-2xl max-h-[90vh] overflow-hidden"},Re={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},We={class:"text-xl font-semibold text-gray-900 dark:text-white"},Fe={class:"p-6 overflow-y-auto"},Oe={key:1,class:"fixed inset-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm flex items-center justify-center z-40"},qe=c(()=>e("div",{class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-xl border border-gray-200 dark:border-gray-700"},[e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e("span",{class:"text-gray-900 dark:text-white font-medium"},"Loading timeline...")])],-1)),Ge=[qe],He={__name:"PlannerRoster",setup(g){const x=H(),r=v(x.params.department||""),C=v(x.params.dashboardName||"Team Planner"),n=v("week"),h=v(!1),u=v(null),k=U(()=>[{label:"Dashboard",route:{name:"Dashboard"}},{label:C.value,route:{name:"PlannerRoster"}}]),{assignees:d,tasks:b,loading:S,workloadStats:y,overallocatedAssignees:Je,underutilizedAssignees:Ke,loadWorkloadData:w,moveTask:I,updateTask:E,createTask:N}=le(r.value),P=U(()=>{const a=new Set;return d.value.forEach(t=>{t.department&&a.add(t.department)}),Array.from(a).sort()}),V=()=>_(this,null,function*(){yield w(null,null,!0)}),B=()=>{w(null,null,!0)},L=a=>{const t=b.value.find(o=>o.id===a);u.value=t||null,h.value=!0},R=a=>_(this,null,function*(){try{yield I(a.taskId,a.assigneeId,a.startDate,a.endDate)}catch(t){console.error("Error moving task:",t)}}),W=a=>_(this,null,function*(){try{yield E(a.taskId,a.updates),p()}catch(t){console.error("Error updating task:",t)}}),F=a=>_(this,null,function*(){try{yield N(a),p()}catch(t){console.error("Error creating task:",t)}}),A=(a={})=>{u.value=null,h.value=!0},p=()=>{u.value=null,h.value=!1},O=()=>{const a=new Date;if(n.value==="week"){const t=new Date(a),o=t.getDay(),q=t.getDate()-o+(o===0?-6:1);t.setDate(q);const M=new Date(t);return M.setDate(t.getDate()+6),`${t.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`}else return a.toLocaleDateString("en-US",{year:"numeric",month:"long"})};return J(()=>x.params.department,a=>{a!==r.value&&(r.value=a||"",w(null,null,!0))},{immediate:!0}),K(()=>{w()}),(a,t)=>(f(),Q(oe,{breadcrumbs:k.value},{default:T(()=>[e("div",ie,[e("div",ce,[e("div",ue,[e("div",me,[e("div",ge,[l(s(m),{name:"calendar",class:"w-6 h-6 text-white"})]),e("div",null,[he,e("div",be,[e("div",xe,[l(s(m),{name:"users",class:"w-4 h-4"}),e("span",null,i(r.value.value||"All Departments"),1)]),ke,e("div",pe,[l(s(m),{name:"clock",class:"w-4 h-4"}),e("span",null,i(O()),1)])])])]),e("div",_e,[e("div",ve,[e("div",fe,i(s(y).totalAssignees),1),ye]),e("div",we,[e("div",Te,i(s(y).scheduledTasks),1),De]),e("div",Ce,[e("div",Se,i(s(y).unscheduledTasks),1),ze]),e("div",Ae,[e("div",Me,i(Math.round(s(y).overallUtilization))+"%",1),Ue])])]),e("div",$e,[e("div",je,[e("div",Ie,[l(s(m),{name:"filter",class:"w-4 h-4 text-gray-500 dark:text-gray-400"}),X(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value.value=o),class:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",onChange:B},[Ee,(f(!0),D(ee,null,Z(P.value,o=>(f(),D("option",{key:o,value:o},i(o),9,Ne))),128))],544),[[Y,r.value.value]])]),e("div",Pe,[e("button",{onClick:t[1]||(t[1]=o=>n.value="week"),class:$(["px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200",n.value==="week"?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"])}," Week ",2),e("button",{onClick:t[2]||(t[2]=o=>n.value="month"),class:$(["px-3 py-1.5 text-sm font-medium rounded-md transition-all duration-200",n.value==="month"?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"])}," Month ",2)])]),e("div",Ve,[l(s(z),{variant:"ghost",theme:"gray",size:"sm",loading:s(S),onClick:V},{default:T(()=>[l(s(m),{name:"refresh-cw",class:"w-4 h-4"})]),_:1},8,["loading"]),l(s(z),{variant:"solid",theme:"blue",size:"sm",onClick:A},{default:T(()=>[l(s(m),{name:"plus",class:"w-4 h-4 mr-2"}),te(" Add Task ")]),_:1})])])]),e("div",Be,[l(de,{assignees:s(d),tasks:s(b),loading:s(S),onTaskClick:L,onTaskMove:R,onAddTask:A},null,8,["assignees","tasks","loading"])]),h.value?(f(),D("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:ae(p,["self"])},[e("div",Le,[e("div",Re,[e("h2",We,i(u.value?"Edit Task":"Create Task"),1),l(s(z),{variant:"ghost",theme:"gray",size:"sm",onClick:p},{default:T(()=>[l(s(m),{name:"x",class:"w-5 h-5"})]),_:1})]),e("div",Fe,[l(ne,{task:u.value,department:r.value.value,assignees:s(d),onClose:p,onUpdate:W,onCreate:F},null,8,["task","department","assignees"])])])])):j("",!0),s(S)?(f(),D("div",Oe,Ge)):j("",!0)])]),_:1},8,["breadcrumbs"]))}},et=G(He,[["__scopeId","data-v-08db7ed3"]]);export{et as default};
