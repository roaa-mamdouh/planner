var k=(y,c,o)=>new Promise((_,m)=>{var x=l=>{try{d(o.next(l))}catch(r){m(r)}},f=l=>{try{d(o.throw(l))}catch(r){m(r)}},d=l=>l.done?_(l.value):Promise.resolve(l.value).then(x,f);d((o=o.apply(y,c)).next())});import{_ as E}from"./Layout-DHWlGU1y.js";import{_ as M,h as P,r as u,i as W,j as $,a as F,w as b,b as R,o as C,d as e,e as n,t as i,u as a,k as S,l as z,m as j,f as O,p as q}from"./index-scHx8GJe.js";import{u as G,T as H,_ as J}from"./useWorkloadManager-BEuKMZbd.js";const K={class:"mx-auto px-4 lg:px-8 max-w-[2000px]"},L={class:"workload-header mb-6 sticky top-0 z-50 bg-white dark:bg-gray-900 pb-4",ref:"headerRef"},Q={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4"},X={class:"flex items-center gap-4"},Y={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},Z={class:"flex items-center gap-6"},ee={class:"stats-grid grid grid-cols-2 lg:grid-cols-4 gap-4"},se={class:"stat-item text-center"},te={class:"text-lg font-semibold text-blue-600 dark:text-blue-400"},ae={class:"stat-item text-center"},le={class:"text-lg font-semibold text-yellow-600 dark:text-yellow-400"},oe={class:"stat-item text-center"},ne={class:"text-lg font-semibold text-green-600 dark:text-green-400"},de={class:"stat-item text-center"},re={class:"flex items-center gap-2"},ie={class:"flex flex-col xl:flex-row gap-6 mt-6"},ce={class:"flex-1"},ue={key:0,class:"w-full xl:w-96"},me={__name:"PlannerEnhanced",setup(y){const c=P(),o=u(c.params.department),_=u(c.params.dashboardName),m=[{label:"Dashboard",route:{name:"Dashboard"}},{label:_.value,route:{name:"PlannerEnhanced"}}],{assignees:x,tasks:f,loading:d,workloadStats:l,overallocatedAssignees:r,underutilizedAssignees:xe,loadWorkloadData:h,moveTask:A,updateTask:D,calculateUtilization:ge}=G(o.value);W(()=>c.params.department,t=>{t&&(o.value=t,h(null,null,!0))},{immediate:!0});const w=u(!1),g=u(!1),v=u(null),U=()=>k(this,null,function*(){yield h(null,null,!0)}),I=t=>{v.value=t,g.value=!0},N=t=>k(this,null,function*(){yield A(t.taskId,t.assigneeId,t.startDate,t.endDate)}),T=t=>k(this,null,function*(){yield D(t.taskId,t.updates)}),V=t=>{v.value=null,g.value=!0},B=()=>{v.value=null,g.value=!1};return $(()=>{h()}),(t,s)=>{const p=R("FeatherIcon");return C(),F(E,{breadcrumbs:m},{default:b(()=>[e("div",K,[e("div",L,[e("div",Q,[e("div",X,[e("div",null,[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Workload Planner",-1)),e("div",Y,[n(p,{name:"users",class:"w-4 h-4"}),e("span",null,i(o.value.value),1),s[1]||(s[1]=e("span",{class:"mx-2"},"â€¢",-1)),e("span",null,i(a(l).totalAssignees)+" team members",1)])])]),e("div",Z,[e("div",ee,[e("div",se,[e("div",te,i(a(l).scheduledTasks),1),s[3]||(s[3]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Scheduled",-1))]),e("div",ae,[e("div",le,i(a(l).unscheduledTasks),1),s[4]||(s[4]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Unscheduled",-1))]),e("div",oe,[e("div",ne,i(a(l).overallUtilization)+"%",1),s[5]||(s[5]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Utilization",-1))]),e("div",de,[e("div",{class:S(["text-lg font-semibold",a(r).length>0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"])},i(a(r).length),3),s[6]||(s[6]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Overloaded",-1))])]),e("div",re,[n(a(z),{variant:"ghost",theme:"gray",size:"sm",loading:a(d),onClick:U},{default:b(()=>[n(p,{name:"refresh-cw",class:"w-4 h-4"})]),_:1},8,["loading"]),n(a(z),{variant:"ghost",theme:"gray",size:"sm",onClick:s[0]||(s[0]=ve=>w.value=!w.value)},{default:b(()=>[n(p,{name:"bar-chart-2",class:"w-4 h-4 mr-2"}),s[7]||(s[7]=j(" Analytics "))]),_:1,__:[7]})])])]),e("div",ie,[e("div",ce,[n(H,{assignees:a(x),tasks:a(f),loading:a(d),onTaskClick:I,onTaskMove:N,onTaskUpdate:T,onAddTask:V},null,8,["assignees","tasks","loading"])]),g.value?(C(),O("div",ue,[n(J,{task:v.value,department:o.value.value,assignees:a(x),onClose:B,onUpdate:T,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},null,8,["task","department","assignees"])])):q("",!0)])],512)])]),_:1})}}},pe=M(me,[["__scopeId","data-v-fbdfc36b"]]);export{pe as default};
