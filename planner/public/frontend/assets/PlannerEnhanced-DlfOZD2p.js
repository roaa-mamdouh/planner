var v=(n,_,l)=>new Promise((k,m)=>{var x=a=>{try{d(l.next(a))}catch(r){m(r)}},p=a=>{try{d(l.throw(a))}catch(r){m(r)}},d=a=>a.done?k(a.value):Promise.resolve(a.value).then(x,p);d((l=l.apply(n,_)).next())});import{_ as E}from"./Layout-BjmPT8jC.js";import{_ as M,h as P,r as u,i as W,j as $,a as F,w as y,b as R,o as I,d as e,e as o,t as c,u as t,k as j,l as z,m as q,f as O,p as G,q as H,s as J}from"./index-DcnW8VOg.js";import{u as K,T as L,_ as Q}from"./useWorkloadManager-DSwWFk82.js";const i=n=>(H("data-v-fbdfc36b"),n=n(),J(),n),X={class:"mx-auto px-4 lg:px-8 max-w-[2000px]"},Y={class:"workload-header mb-6 sticky top-0 z-50 bg-white dark:bg-gray-900 pb-4",ref:"headerRef"},Z={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4"},ee={class:"flex items-center gap-4"},se=i(()=>e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Workload Planner",-1)),te={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},ae=i(()=>e("span",{class:"mx-2"},"â€¢",-1)),le={class:"flex items-center gap-6"},oe={class:"stats-grid grid grid-cols-2 lg:grid-cols-4 gap-4"},ne={class:"stat-item text-center"},de={class:"text-lg font-semibold text-blue-600 dark:text-blue-400"},re=i(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Scheduled",-1)),ce={class:"stat-item text-center"},ie={class:"text-lg font-semibold text-yellow-600 dark:text-yellow-400"},_e=i(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Unscheduled",-1)),ue={class:"stat-item text-center"},me={class:"text-lg font-semibold text-green-600 dark:text-green-400"},xe=i(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Utilization",-1)),ge={class:"stat-item text-center"},he=i(()=>e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Overloaded",-1)),ve={class:"flex items-center gap-2"},ke={class:"flex flex-col xl:flex-row gap-6 mt-6"},pe={class:"flex-1"},fe={key:0,class:"w-full xl:w-96"},be={__name:"PlannerEnhanced",setup(n){const _=P(),l=u(_.params.department),k=u(_.params.dashboardName),m=[{label:"Dashboard",route:{name:"Dashboard"}},{label:k.value,route:{name:"PlannerEnhanced"}}],{assignees:x,tasks:p,loading:d,workloadStats:a,overallocatedAssignees:r,underutilizedAssignees:ye,loadWorkloadData:f,moveTask:A,updateTask:D,calculateUtilization:we}=K(l.value);W(()=>_.params.department,s=>{s&&(l.value=s,f(null,null,!0))},{immediate:!0});const w=u(!1),g=u(!1),h=u(null),U=()=>v(this,null,function*(){yield f(null,null,!0)}),N=s=>{h.value=s,g.value=!0},S=s=>v(this,null,function*(){yield A(s.taskId,s.assigneeId,s.startDate,s.endDate)}),T=s=>v(this,null,function*(){yield D(s.taskId,s.updates)}),V=s=>{h.value=null,g.value=!0},B=()=>{h.value=null,g.value=!1};return $(()=>{f()}),(s,C)=>{const b=R("FeatherIcon");return I(),F(E,{breadcrumbs:m},{default:y(()=>[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",null,[se,e("div",te,[o(b,{name:"users",class:"w-4 h-4"}),e("span",null,c(l.value.value),1),ae,e("span",null,c(t(a).totalAssignees)+" team members",1)])])]),e("div",le,[e("div",oe,[e("div",ne,[e("div",de,c(t(a).scheduledTasks),1),re]),e("div",ce,[e("div",ie,c(t(a).unscheduledTasks),1),_e]),e("div",ue,[e("div",me,c(t(a).overallUtilization)+"%",1),xe]),e("div",ge,[e("div",{class:j(["text-lg font-semibold",t(r).length>0?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"])},c(t(r).length),3),he])]),e("div",ve,[o(t(z),{variant:"ghost",theme:"gray",size:"sm",loading:t(d),onClick:U},{default:y(()=>[o(b,{name:"refresh-cw",class:"w-4 h-4"})]),_:1},8,["loading"]),o(t(z),{variant:"ghost",theme:"gray",size:"sm",onClick:C[0]||(C[0]=Te=>w.value=!w.value)},{default:y(()=>[o(b,{name:"bar-chart-2",class:"w-4 h-4 mr-2"}),q(" Analytics ")]),_:1})])])]),e("div",ke,[e("div",pe,[o(L,{assignees:t(x),tasks:t(p),loading:t(d),onTaskClick:N,onTaskMove:S,onTaskUpdate:T,onAddTask:V},null,8,["assignees","tasks","loading"])]),g.value?(I(),O("div",fe,[o(Q,{task:h.value,department:l.value.value,assignees:t(x),onClose:B,onUpdate:T,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},null,8,["task","department","assignees"])])):G("",!0)])],512)])]),_:1})}}},De=M(be,[["__scopeId","data-v-fbdfc36b"]]);export{De as default};
